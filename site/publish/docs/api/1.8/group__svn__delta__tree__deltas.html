<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Subversion: Tree deltas</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Subversion
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Tree deltas<div class="ingroups"><a class="el" href="group__delta__support.html">Delta generation and handling</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Traversing tree deltas.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure full of callback functions the delta source will invoke as it produces the delta.  <a href="structsvn__delta__editor__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gae53a39b99de02552a81ca4c917de177a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__tree__deltas.html#gae53a39b99de02552a81ca4c917de177a">svn_delta_editor_t</a></td></tr>
<tr class="memdesc:gae53a39b99de02552a81ca4c917de177a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure full of callback functions the delta source will invoke as it produces the delta.  <a href="#gae53a39b99de02552a81ca4c917de177a">More...</a><br/></td></tr>
<tr class="separator:gae53a39b99de02552a81ca4c917de177a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab15253a8fcc50b7813844832016641a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__tree__deltas.html#gab15253a8fcc50b7813844832016641a2">svn_delta_default_editor</a> (apr_pool_t *pool)</td></tr>
<tr class="memdesc:gab15253a8fcc50b7813844832016641a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a default delta editor template, allocated in <em>pool</em>.  <a href="#gab15253a8fcc50b7813844832016641a2">More...</a><br/></td></tr>
<tr class="separator:gab15253a8fcc50b7813844832016641a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga277d961312294cd385710ee4d32d7f3d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__tree__deltas.html#ga277d961312294cd385710ee4d32d7f3d">svn_delta_noop_window_handler</a> (<a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *window, void *baton)</td></tr>
<tr class="memdesc:ga277d961312294cd385710ee4d32d7f3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A text-delta window handler which does nothing.  <a href="#ga277d961312294cd385710ee4d32d7f3d">More...</a><br/></td></tr>
<tr class="separator:ga277d961312294cd385710ee4d32d7f3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f1c0290d6cea00bb1919e8a23087650"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__tree__deltas.html#ga8f1c0290d6cea00bb1919e8a23087650">svn_delta_get_cancellation_editor</a> (<a class="el" href="svn__types_8h.html#addaab83431a3d41b6c62e9d501cd5ecc">svn_cancel_func_t</a> cancel_func, void *cancel_baton, const <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a> *wrapped_editor, void *wrapped_baton, const <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a> **editor, void **edit_baton, apr_pool_t *pool)</td></tr>
<tr class="memdesc:ga8f1c0290d6cea00bb1919e8a23087650"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set <em>*editor</em> and <em>*edit_baton</em> to a cancellation editor that wraps <em>wrapped_editor</em> and <em>wrapped_baton</em>.  <a href="#ga8f1c0290d6cea00bb1919e8a23087650">More...</a><br/></td></tr>
<tr class="separator:ga8f1c0290d6cea00bb1919e8a23087650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabbbc5a169982cca58a3b87bc425d50c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__delta__tree__deltas.html#gabbbc5a169982cca58a3b87bc425d50c1">svn_delta_depth_filter_editor</a> (const <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a> **editor, void **edit_baton, const <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a> *wrapped_editor, void *wrapped_edit_baton, <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2c">svn_depth_t</a> requested_depth, <a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> has_target, apr_pool_t *pool)</td></tr>
<tr class="memdesc:gabbbc5a169982cca58a3b87bc425d50c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set <em>*editor</em> and <em>*edit_baton</em> to an depth-based filtering editor that wraps <em>wrapped_editor</em> and <em>wrapped_baton</em>.  <a href="#gabbbc5a169982cca58a3b87bc425d50c1">More...</a><br/></td></tr>
<tr class="separator:gabbbc5a169982cca58a3b87bc425d50c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Traversing tree deltas. </p>
<p>In Subversion, we've got various producers and consumers of tree deltas.</p>
<p>In processing a `commit' command:</p>
<ul>
<li>The client examines its working copy data, and produces a tree delta describing the changes to be committed.</li>
<li>The client networking library consumes that delta, and sends them across the wire as an equivalent series of network requests (for example, to svnserve as an ra_svn protocol stream, or to an Apache httpd server as WebDAV commands)</li>
<li>The server receives those requests and produces a tree delta &mdash; hopefully equivalent to the one the client produced above.</li>
<li>The Subversion server module consumes that delta and commits an appropriate transaction to the filesystem.</li>
</ul>
<p>In processing an `update' command, the process is reversed:</p>
<ul>
<li>The Subversion server module talks to the filesystem and produces a tree delta describing the changes necessary to bring the client's working copy up to date.</li>
<li>The server consumes this delta, and assembles a reply representing the appropriate changes.</li>
<li>The client networking library receives that reply, and produces a tree delta &mdash; hopefully equivalent to the one the Subversion server produced above.</li>
<li>The working copy library consumes that delta, and makes the appropriate changes to the working copy.</li>
</ul>
<p>The simplest approach would be to represent tree deltas using the obvious data structure. To do an update, the server would construct a delta structure, and the working copy library would apply that structure to the working copy; the network layer's job would simply be to get the structure across the net intact.</p>
<p>However, we expect that these deltas will occasionally be too large to fit in a typical workstation's swap area. For example, in checking out a 200Mb source tree, the entire source tree is represented by a single tree delta. So it's important to handle deltas that are too large to fit in swap all at once.</p>
<p>So instead of representing the tree delta explicitly, we define a standard way for a consumer to process each piece of a tree delta as soon as the producer creates it. The <a class="el" href="structsvn__delta__editor__t.html" title="A structure full of callback functions the delta source will invoke as it produces the delta...">svn_delta_editor_t</a> structure is a set of callback functions to be defined by a delta consumer, and invoked by a delta producer. Each invocation of a callback function describes a piece of the delta &mdash; a file's contents changing, something being renamed, etc. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gae53a39b99de02552a81ca4c917de177a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a>  <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A structure full of callback functions the delta source will invoke as it produces the delta. </p>
<dl class="section note"><dt>Note</dt><dd>Don't try to allocate one of these yourself. Instead, always use <a class="el" href="group__svn__delta__tree__deltas.html#gab15253a8fcc50b7813844832016641a2" title="Return a default delta editor template, allocated in pool. ">svn_delta_default_editor()</a> or some other constructor, to ensure that unused slots are filled in with no-op functions.</dd></dl>
<h3>Function Usage</h3>
<p>Here's how to use these functions to express a tree delta.</p>
<p>The delta consumer implements the callback functions described in this structure, and the delta producer invokes them. So the caller (producer) is pushing tree delta data at the callee (consumer).</p>
<p>At the start of traversal, the consumer provides <em>edit_baton</em>, a baton global to the entire delta edit. If there is a target revision that needs to be set for this operation, the producer should call the <code>set_target_revision</code> function at this point.</p>
<p>Next, if there are any tree deltas to express, the producer should pass the <em>edit_baton</em> to the <code>open_root</code> function, to get a baton representing root of the tree being edited.</p>
<p>Most of the callbacks work in the obvious way: </p>
<pre class="fragment">@c delete_entry
@c add_file
@c add_directory
@c open_file
@c open_directory
</pre><p>Each of these takes a directory baton, indicating the directory in which the change takes place, and a <em>path</em> argument, giving the path of the file, subdirectory, or directory entry to change.</p>
<p>The <em>path</em> argument to each of the callbacks is relative to the root of the edit. Editors will usually want to join this relative path with some base stored in the edit baton (e.g. a URL, or a location in the OS filesystem).</p>
<p>Since every call requires a parent directory baton, including <code>add_directory</code> and <code>open_directory</code>, where do we ever get our initial directory baton, to get things started? The <code>open_root</code> function returns a baton for the top directory of the change. In general, the producer needs to invoke the editor's <code>open_root</code> function before it can get anything of interest done.</p>
<p>While <code>open_root</code> provides a directory baton for the root of the tree being changed, the <code>add_directory</code> and <code>open_directory</code> callbacks provide batons for other directories. Like the callbacks above, they take a <em>parent_baton</em> and a relative path <em>path</em>, and then return a new baton for the subdirectory being created / modified &mdash; <em>child_baton</em>. The producer can then use <em>child_baton</em> to make further changes in that subdirectory.</p>
<p>So, if we already have subdirectories named `foo' and `foo/bar', then the producer can create a new file named `foo/bar/baz.c' by calling:</p>
<ul>
<li><code>open_root</code> () &mdash; yielding a baton <em>root</em> for the top directory</li>
<li><code>open_directory</code> (<em>root</em>, "foo") &mdash; yielding a baton <em>f</em> for `foo'</li>
<li><code>open_directory</code> (<em>f</em>, "foo/bar") &mdash; yielding a baton <em>b</em> for `foo/bar'</li>
<li><code>add_file</code> (<em>b</em>, "foo/bar/baz.c")</li>
</ul>
<p>When the producer is finished making changes to a directory, it should call <code>close_directory</code>. This lets the consumer do any necessary cleanup, and free the baton's storage.</p>
<p>The <code>add_file</code> and <code>open_file</code> callbacks each return a baton for the file being created or changed. This baton can then be passed to <code>apply_textdelta</code> to change the file's contents, or <code>change_file_prop</code> to change the file's properties. When the producer is finished making changes to a file, it should call <code>close_file</code>, to let the consumer clean up and free the baton.</p>
<p>The <code>add_file</code> and <code>add_directory</code> functions each take arguments <em>copyfrom_path</em> and <em>copyfrom_revision</em>. If <em>copyfrom_path</em> is non-<code>NULL</code>, then <em>copyfrom_path</em> and <em>copyfrom_revision</em> indicate where the file or directory should be copied from (to create the file or directory being added). In that case, <em>copyfrom_path</em> must be either a path relative to the root of the edit, or a URI from the repository being edited. If <em>copyfrom_path</em> is <code>NULL</code>, then <em>copyfrom_revision</em> must be <a class="el" href="svn__types_8h.html#a8857d4630bf116eaba54a1b65d43ad92" title="The &#39;official&#39; invalid revision num. ">SVN_INVALID_REVNUM</a>; it is invalid to pass a mix of valid and invalid copyfrom arguments.</p>
<h3>Function Call Ordering</h3>
<p>There are six restrictions on the order in which the producer may use the batons:</p>
<ol type="1">
<li>The producer may call <code>open_directory</code>, <code>add_directory</code>, <code>open_file</code>, <code>add_file</code> at most once on any given directory entry. <code>delete_entry</code> may be called at most once on any given directory entry and may later be followed by <code>add_directory</code> or <code>add_file</code> on the same directory entry. <code>delete_entry</code> may not be called on any directory entry after <code>open_directory</code>, <code>add_directory</code>, <code>open_file</code> or <code>add_file</code> has been called on that directory entry.</li>
<li>The producer may not close a directory baton until it has closed all batons for its subdirectories.</li>
<li>When a producer calls <code>open_directory</code> or <code>add_directory</code>, it must specify the most recently opened of the currently open directory batons. Put another way, the producer cannot have two sibling directory batons open at the same time.</li>
<li>A producer must call <code>change_dir_prop</code> on a directory either before opening any of the directory's subdirs or after closing them, but not in the middle.</li>
<li><p class="startli">When the producer calls <code>open_file</code> or <code>add_file</code>, either:</p>
<p class="startli">(a) The producer must follow with any changes to the file (<code>change_file_prop</code> and/or <code>apply_textdelta</code>, as applicable), followed by a <code>close_file</code> call, before issuing any other file or directory calls, or</p>
<p class="startli">(b) The producer must follow with a <code>change_file_prop</code> call if it is applicable, before issuing any other file or directory calls; later, after all directory batons including the root have been closed, the producer must issue <code>apply_textdelta</code> and <code>close_file</code> calls.</p>
</li>
<li>When the producer calls <code>apply_textdelta</code>, it must make all of the window handler calls (including the <code>NULL</code> window at the end) before issuing any other <a class="el" href="structsvn__delta__editor__t.html" title="A structure full of callback functions the delta source will invoke as it produces the delta...">svn_delta_editor_t</a> calls.</li>
</ol>
<p>So, the producer needs to use directory and file batons as if it is doing a single depth-first traversal of the tree, with the exception that the producer may keep file batons open in order to make <code>apply_textdelta</code> calls at the end.</p>
<h3>Pool Usage</h3>
<p>Many editor functions are invoked multiple times, in a sequence determined by the editor "driver". The driver is responsible for creating a pool for use on each iteration of the editor function, and clearing that pool between each iteration. The driver passes the appropriate pool on each function invocation.</p>
<p>Based on the requirement of calling the editor functions in a depth-first style, it is usually customary for the driver to similarly nest the pools. However, this is only a safety feature to ensure that pools associated with deeper items are always cleared when the top-level items are also cleared. The interface does not assume, nor require, any particular organization of the pools passed to these functions. In fact, if "postfix deltas" are used for files, the file pools definitely need to live outside the scope of their parent directories' pools.</p>
<p>Note that close_directory can be called <em>before</em> a file in that directory has been closed. That is, the directory's baton is closed before the file's baton. The implication is that <code>apply_textdelta</code> and <code>close_file</code> should not refer to a parent directory baton UNLESS the editor has taken precautions to allocate it in a pool of the appropriate lifetime (the <em>dir_pool</em> passed to <code>open_directory</code> and <code>add_directory</code> definitely does not have the proper lifetime). In general, it is recommended to simply avoid keeping a parent directory baton in a file baton.</p>
<h3>Errors</h3>
<p>At least one implementation of the editor interface is asynchronous; an error from one operation may be detected some number of operations later. As a result, an editor driver must not assume that an error from an editing function resulted from the particular operation being detected. Moreover, once an editing function (including <code>close_edit</code>) returns an error, the edit is dead; the only further operation which may be called on the editor is <code>abort_edit</code>. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gab15253a8fcc50b7813844832016641a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a>* svn_delta_default_editor </td>
          <td>(</td>
          <td class="paramtype">apr_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a default delta editor template, allocated in <em>pool</em>. </p>
<p>The editor functions in the template do only the most basic baton-swapping: each editor function that produces a baton does so by copying its incoming baton into the outgoing baton reference.</p>
<p>This editor is not intended to be useful by itself, but is meant to be the basis for a useful editor. After getting a default editor, you substitute in your own implementations for the editor functions you care about. The ones you don't care about, you don't have to implement &ndash; you can rely on the template's implementation to safely do nothing of consequence. </p>

</div>
</div>
<a class="anchor" id="gabbbc5a169982cca58a3b87bc425d50c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_delta_depth_filter_editor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a> **&#160;</td>
          <td class="paramname"><em>editor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>edit_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a> *&#160;</td>
          <td class="paramname"><em>wrapped_editor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>wrapped_edit_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2c">svn_depth_t</a>&#160;</td>
          <td class="paramname"><em>requested_depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a>&#160;</td>
          <td class="paramname"><em>has_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set <em>*editor</em> and <em>*edit_baton</em> to an depth-based filtering editor that wraps <em>wrapped_editor</em> and <em>wrapped_baton</em>. </p>
<p>The <em>editor</em> will track the depth of this drive against the <em>requested_depth</em>, taking into account whether not the edit drive is making use of a target (via <em>has_target</em>), and forward editor calls which operate "within" the request depth range through to <em>wrapped_editor</em>.</p>
<p><em>requested_depth</em> must be one of the following depth values: <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2ca9c9a00ca9d05799d0d2a7646d4f0cbf2" title="D + all descendants (full recursion from D). ">svn_depth_infinity</a>, <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2ca8783254e886077b74a05341491fc353c" title="Just the named directory D, no entries. ">svn_depth_empty</a>, <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2ca0c4df7073a6d268f0e26bbf961f35345" title="D + its file children, but not subdirs. ">svn_depth_files</a>, <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2ca68873e015456e384e4f63f3bbd515c8a" title="D + immediate children (D and its entries). ">svn_depth_immediates</a>, or <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2cacf4538edb8e8823b0b9cdeaaac245ebf" title="Depth undetermined or ignored. ">svn_depth_unknown</a>.</p>
<p>If filtering is deemed unnecessary (or if <em>requested_depth</em> is <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2cacf4538edb8e8823b0b9cdeaaac245ebf" title="Depth undetermined or ignored. ">svn_depth_unknown</a>), <em>*editor</em> and <em>*edit_baton</em> will be set to <em>wrapped_editor</em> and <em>wrapped_baton</em>, respectively; otherwise, they'll be set to new objects allocated from <em>pool</em>.</p>
<dl class="section note"><dt>Note</dt><dd>Because the <a class="el" href="structsvn__delta__editor__t.html" title="A structure full of callback functions the delta source will invoke as it produces the delta...">svn_delta_editor_t</a> interface's <code>delete_entry()</code> function doesn't carry node kind information, a depth-based filtering editor being asked to filter for <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2ca0c4df7073a6d268f0e26bbf961f35345" title="D + its file children, but not subdirs. ">svn_depth_files</a> but receiving a <code>delete_entry()</code> call on an immediate child of the editor's target is unable to know if that deletion should be allowed or filtered out &ndash; a delete of a top-level file is okay in this case, a delete of a top-level subdirectory is not. As such, this filtering editor takes a conservative approach, and ignores top-level deletion requests when filtering for <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2ca0c4df7073a6d268f0e26bbf961f35345" title="D + its file children, but not subdirs. ">svn_depth_files</a>. Fortunately, most non-depth-aware (pre-1.5) Subversion editor drivers can be told to drive non-recursively (where non-recursive means essentially <a class="el" href="svn__types_8h.html#a21dd8b080111fa6fb5d59156299f3a2ca0c4df7073a6d268f0e26bbf961f35345" title="D + its file children, but not subdirs. ">svn_depth_files</a>), which means they won't transmit out-of-scope editor commands anyway.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>New in 1.5. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8f1c0290d6cea00bb1919e8a23087650"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_delta_get_cancellation_editor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="svn__types_8h.html#addaab83431a3d41b6c62e9d501cd5ecc">svn_cancel_func_t</a>&#160;</td>
          <td class="paramname"><em>cancel_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cancel_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a> *&#160;</td>
          <td class="paramname"><em>wrapped_editor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>wrapped_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsvn__delta__editor__t.html">svn_delta_editor_t</a> **&#160;</td>
          <td class="paramname"><em>editor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>edit_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set <em>*editor</em> and <em>*edit_baton</em> to a cancellation editor that wraps <em>wrapped_editor</em> and <em>wrapped_baton</em>. </p>
<p>The <em>editor</em> will call <em>cancel_func</em> with <em>cancel_baton</em> when each of its functions is called, continuing on to call the corresponding wrapped function if <em>cancel_func</em> returns <a class="el" href="svn__error_8h.html#a657398222a237c3c8cc77dcabf427f63" title="the best kind of (svn_error_t *) ! ">SVN_NO_ERROR</a>.</p>
<p>If <em>cancel_func</em> is <code>NULL</code>, set <em>*editor</em> to <em>wrapped_editor</em> and <em>*edit_baton</em> to <em>wrapped_baton</em>. </p>

</div>
</div>
<a class="anchor" id="ga277d961312294cd385710ee4d32d7f3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_delta_noop_window_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsvn__txdelta__window__t.html">svn_txdelta_window_t</a> *&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>baton</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A text-delta window handler which does nothing. </p>
<p>Editors can return this handler from <code>apply_textdelta</code> if they don't care about text delta windows. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 19 2015 09:37:24 for Subversion by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
