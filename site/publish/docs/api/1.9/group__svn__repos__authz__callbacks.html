<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Subversion: Repository authorization callbacks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Subversion
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">Repository authorization callbacks</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gad36e1f3f846af40f17422af70f08ccf8"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__repos__authz__callbacks.html#gad36e1f3f846af40f17422af70f08ccf8">svn_repos_authz_func_t</a> )(<a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> *allowed, <a class="el" href="group__svn__fs__roots.html#gaa0616aebbe57398ec86bcb8a432248cd">svn_fs_root_t</a> *root, const char *path, void *baton, apr_pool_t *pool)</td></tr>
<tr class="memdesc:gad36e1f3f846af40f17422af70f08ccf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback type for checking authorization on a path.  <a href="#gad36e1f3f846af40f17422af70f08ccf8">More...</a><br/></td></tr>
<tr class="separator:gad36e1f3f846af40f17422af70f08ccf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga813ff941893c49eac2c3a40db0454fd3"><td class="memItemLeft" align="right" valign="top">typedef enum <br class="typebreak"/>
<a class="el" href="group__svn__repos__authz__callbacks.html#ga90d4f1b918bc84e87963fc5fed5dcb26">svn_repos_authz_access_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__repos__authz__callbacks.html#ga813ff941893c49eac2c3a40db0454fd3">svn_repos_authz_access_t</a></td></tr>
<tr class="memdesc:ga813ff941893c49eac2c3a40db0454fd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">An enum defining the kinds of access authz looks up.  <a href="#ga813ff941893c49eac2c3a40db0454fd3">More...</a><br/></td></tr>
<tr class="separator:ga813ff941893c49eac2c3a40db0454fd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaface4990939fd87037b6e7b7cdff47ca"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__repos__authz__callbacks.html#gaface4990939fd87037b6e7b7cdff47ca">svn_repos_authz_callback_t</a> )(<a class="el" href="group__svn__repos__authz__callbacks.html#ga90d4f1b918bc84e87963fc5fed5dcb26">svn_repos_authz_access_t</a> required, <a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> *allowed, <a class="el" href="group__svn__fs__roots.html#gaa0616aebbe57398ec86bcb8a432248cd">svn_fs_root_t</a> *root, const char *path, void *baton, apr_pool_t *pool)</td></tr>
<tr class="memdesc:gaface4990939fd87037b6e7b7cdff47ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback type for checking authorization on paths produced by the repository commit editor.  <a href="#gaface4990939fd87037b6e7b7cdff47ca">More...</a><br/></td></tr>
<tr class="separator:gaface4990939fd87037b6e7b7cdff47ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga90d4f1b918bc84e87963fc5fed5dcb26"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__svn__repos__authz__callbacks.html#ga90d4f1b918bc84e87963fc5fed5dcb26">svn_repos_authz_access_t</a> { <br/>
&#160;&#160;<a class="el" href="group__svn__repos__authz__callbacks.html#gga90d4f1b918bc84e87963fc5fed5dcb26aff5fe6d567a388a3f0ac56c07efc644d">svn_authz_none</a> = 0, 
<br/>
&#160;&#160;<a class="el" href="group__svn__repos__authz__callbacks.html#gga90d4f1b918bc84e87963fc5fed5dcb26a28e8e499b87ca8243c391b90a2544e53">svn_authz_read</a> = 1, 
<br/>
&#160;&#160;<a class="el" href="group__svn__repos__authz__callbacks.html#gga90d4f1b918bc84e87963fc5fed5dcb26a178f2e29b60d1f142a11db104fcf1758">svn_authz_write</a> = 2, 
<br/>
&#160;&#160;<a class="el" href="group__svn__repos__authz__callbacks.html#gga90d4f1b918bc84e87963fc5fed5dcb26a27842cbdc39c9d360e9ba8e9b91b70cb">svn_authz_recursive</a> = 4
<br/>
 }</td></tr>
<tr class="memdesc:ga90d4f1b918bc84e87963fc5fed5dcb26"><td class="mdescLeft">&#160;</td><td class="mdescRight">An enum defining the kinds of access authz looks up.  <a href="group__svn__repos__authz__callbacks.html#ga90d4f1b918bc84e87963fc5fed5dcb26">More...</a><br/></td></tr>
<tr class="separator:ga90d4f1b918bc84e87963fc5fed5dcb26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga813ff941893c49eac2c3a40db0454fd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="group__svn__repos__authz__callbacks.html#ga90d4f1b918bc84e87963fc5fed5dcb26">svn_repos_authz_access_t</a>  <a class="el" href="group__svn__repos__authz__callbacks.html#ga90d4f1b918bc84e87963fc5fed5dcb26">svn_repos_authz_access_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An enum defining the kinds of access authz looks up. </p>
<dl class="section since"><dt>Since</dt><dd>New in 1.3. </dd></dl>

</div>
</div>
<a class="anchor" id="gaface4990939fd87037b6e7b7cdff47ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a>*(* svn_repos_authz_callback_t)(<a class="el" href="group__svn__repos__authz__callbacks.html#ga90d4f1b918bc84e87963fc5fed5dcb26">svn_repos_authz_access_t</a> required, <a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> *allowed, <a class="el" href="group__svn__fs__roots.html#gaa0616aebbe57398ec86bcb8a432248cd">svn_fs_root_t</a> *root, const char *path, void *baton, apr_pool_t *pool)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback type for checking authorization on paths produced by the repository commit editor. </p>
<p>Set <em>*allowed</em> to TRUE to indicate that the <em>required</em> access on <em>path</em> in <em>root</em> is authorized, or set it to FALSE to indicate unauthorized (presumable according to state stored in <em>baton</em>).</p>
<p>If <em>path</em> is NULL, the callback should perform a global authz lookup for the <em>required</em> access. That is, the lookup should check if the <em>required</em> access is granted for at least one path of the repository, and set <em>*allowed</em> to TRUE if so. <em>root</em> may also be NULL if <em>path</em> is NULL.</p>
<p>This callback is very similar to svn_repos_authz_func_t, with the exception of the addition of the <em>required</em> parameter. This is due to historical reasons: when authz was first implemented for <a class="el" href="svn__repos_8h.html#a3485c1fbcf0585bdeaf13379f7217121" title="Use the provided editor and edit_baton to describe the changes necessary for making a given node (and...">svn_repos_dir_delta2()</a>, it seemed there would need only checks for read and write operations, hence the svn_repos_authz_func_t callback prototype and usage scenario. But it was then realized that lookups due to copying needed to be recursive, and that brute-force recursive lookups didn't square with the O(1) performances a copy operation should have.</p>
<p>So a special way to ask for a recursive lookup was introduced. The commit editor needs this capability to retain acceptable performance. Instead of revving the existing callback, causing unnecessary revving of functions that don't actually need the extended functionality, this second, more complete callback was introduced, for use by the commit editor.</p>
<p>Some day, it would be nice to reunite these two callbacks and do the necessary revving anyway, but for the time being, this dual callback mechanism will do. </p>

<p>Definition at line <a class="el" href="svn__repos_8h_source.html#l00155">155</a> of file <a class="el" href="svn__repos_8h_source.html">svn_repos.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad36e1f3f846af40f17422af70f08ccf8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a>*(* svn_repos_authz_func_t)(<a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> *allowed, <a class="el" href="group__svn__fs__roots.html#gaa0616aebbe57398ec86bcb8a432248cd">svn_fs_root_t</a> *root, const char *path, void *baton, apr_pool_t *pool)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback type for checking authorization on a path. </p>
<p>Set <em>*allowed</em> to TRUE to indicate that some operation is authorized for <em>path</em> in <em>root</em>, or set it to FALSE to indicate unauthorized (presumably according to state stored in <em>baton</em>).</p>
<p>Do not assume <em>pool</em> has any lifetime beyond this call.</p>
<p>The exact operation being authorized depends on the callback implementation. For read authorization, for example, the caller would implement an instance that does read checking, and pass it as a parameter named [perhaps] 'authz_read_func'. The receiver of that parameter might also take another parameter named 'authz_write_func', which although sharing this type, would be a different implementation.</p>
<dl class="section note"><dt>Note</dt><dd>If someday we want more sophisticated authorization states than just yes/no, <em>allowed</em> can become an enum type. </dd></dl>

<p>Definition at line <a class="el" href="svn__repos_8h_source.html#l00093">93</a> of file <a class="el" href="svn__repos_8h_source.html">svn_repos.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga90d4f1b918bc84e87963fc5fed5dcb26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__svn__repos__authz__callbacks.html#ga90d4f1b918bc84e87963fc5fed5dcb26">svn_repos_authz_access_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An enum defining the kinds of access authz looks up. </p>
<dl class="section since"><dt>Since</dt><dd>New in 1.3. </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga90d4f1b918bc84e87963fc5fed5dcb26aff5fe6d567a388a3f0ac56c07efc644d"></a>svn_authz_none</em>&nbsp;</td><td class="fielddoc">
<p>No access. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga90d4f1b918bc84e87963fc5fed5dcb26a28e8e499b87ca8243c391b90a2544e53"></a>svn_authz_read</em>&nbsp;</td><td class="fielddoc">
<p>Path can be read. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga90d4f1b918bc84e87963fc5fed5dcb26a178f2e29b60d1f142a11db104fcf1758"></a>svn_authz_write</em>&nbsp;</td><td class="fielddoc">
<p>Path can be altered. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga90d4f1b918bc84e87963fc5fed5dcb26a27842cbdc39c9d360e9ba8e9b91b70cb"></a>svn_authz_recursive</em>&nbsp;</td><td class="fielddoc">
<p>The other access credentials are recursive. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="svn__repos_8h_source.html#l00104">104</a> of file <a class="el" href="svn__repos_8h_source.html">svn_repos.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 19 2015 09:17:28 for Subversion by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
